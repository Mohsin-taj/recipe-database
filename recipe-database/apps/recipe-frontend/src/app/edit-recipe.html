<p-toast></p-toast>
<div class="edit-container p-4">
  <p-card header="Edit Recipe Details" [style]="{ 'max-width': '700px', 'margin': 'auto' }">
    <form [formGroup]="recipeForm" (ngSubmit)="onUpdate()">
      
      <!-- Basic Details -->
      <div class="flex flex-column gap-2 mb-4">
        <label for="name" class="font-bold">Recipe Name</label>
        <input pInputText id="name" formControlName="name" class="w-full" />
      </div>

      <div class="flex flex-column gap-2 mb-4">
        <label for="description" class="font-bold">Instructions</label>
        <textarea pTextarea id="description" formControlName="description" rows="4" class="w-full"></textarea>
      </div>

      
      <div class="flex justify-content-between align-items-center mb-3 border-bottom-1 surface-border pb-2">
        <h3 class="m-0 text-primary">Ingredients</h3>
        <p-button label="Add Row" icon="pi pi-plus" size="small" (onClick)="addIngredient()" [outlined]="true"></p-button>
      </div>

      <div formArrayName="ingredients">
        <div *ngFor="let ing of ingredients.controls; let i=index" [formGroupName]="i" 
             class="flex gap-2 mb-3 align-items-center p-2 surface-50 border-round">
          
          <div class="flex-grow-1">
            <span class="text-xs text-500 block mb-1">Ingredient Name</span>
            <input pInputText formControlName="name" placeholder="e.g. Flour" class="w-full" />
          </div>
          
          <div style="width: 120px;">
            <span class="text-xs text-500 block mb-1">Amount</span>
            <input pInputText formControlName="quantity" placeholder="e.g. 2 cups" class="w-full" />
          </div>

          <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [text]="true" 
                    (onClick)="removeIngredient(i)" class="mt-3"></p-button>
        </div>
      </div>

     
      <div class="flex justify-content-end gap-2 mt-5">
        <p-button label="Cancel" severity="secondary" [text]="true" routerLink="/recipes"></p-button>
        <p-button label="Update Recipe" icon="pi pi-save" type="submit" [disabled]="recipeForm.invalid" ></p-button>
      </div>

    </form>
  </p-card>
</div>
